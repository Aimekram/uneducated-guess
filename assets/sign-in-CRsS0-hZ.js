import{r as c,A as h,j as a,L as p,a as b,b as x}from"./index-DLbGi-RN.js";import{u as g,z as S,e as m,T as d,p as u}from"./TextInput-RCtA0NSl.js";const j=S.object({email:m,password:u}),v=({onSubmit:i,isLoading:t=!1})=>{const[o,n]=c.useState(null),s=g({validators:{onSubmit:j},defaultValues:{email:"",password:""},onSubmit:async({value:e})=>{try{n(null),await i({email:e.email,password:e.password})}catch(r){if(r instanceof h){n("Invalid email or password. Please try again.");return}n("An unexpected error occurred, please refresh and try again")}}});return a.jsxs(a.Fragment,{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Sign in"}),o&&a.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",children:a.jsx("p",{children:o})}),a.jsxs("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),s.validate("submit"),s.handleSubmit()},className:"flex flex-col gap-2",children:[a.jsx(s.Field,{name:"email",validators:{onBlur:m},children:e=>{var r,l;return a.jsx(d,{label:"Email",placeholder:"your-email@example.com",type:"email",field:{name:e.name,value:e.state.value,handleChange:e.handleChange,handleBlur:e.handleBlur},errorMsg:(l=(r=e.state.meta.errors)==null?void 0:r[0])==null?void 0:l.message,isDisabled:t})}}),a.jsx(s.Field,{name:"password",validators:{onBlur:u},children:e=>{var r,l;return a.jsx(d,{label:"Password",placeholder:"Password",type:"password",field:{name:e.name,value:e.state.value,handleChange:e.handleChange,handleBlur:e.handleBlur},errorMsg:(l=(r=e.state.meta.errors)==null?void 0:r[0])==null?void 0:l.message,isDisabled:t})}}),a.jsx("button",{type:"submit",disabled:t||s.state.isSubmitting,className:"bg-blue-500 text-white rounded p-2 hover:bg-blue-600 mt-2 disabled:opacity-50 disabled:cursor-not-allowed",children:t||s.state.isSubmitting?"Signing in...":"Sign in"}),a.jsxs("p",{className:"text-sm text-center mt-4 text-gray-600",children:["Don't have an account?"," ",a.jsx(p,{to:"/sign-up",className:"text-blue-600 hover:underline",children:"Sign up"})]})]})]})},f=()=>{const i=b(),t=async({email:o,password:n})=>{const{error:s}=await x.signIn(o,n);if(s)throw s;i({to:"/dashboard"})};return a.jsx(v,{onSubmit:t})};export{f as component};
